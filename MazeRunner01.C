#include<stdio.h>
#include<stdlib.h>
#include<conio.h>

int x,y;
char maze[24][74]={
{"#########################################################################"},
{"#   #               #               #           #                   #   #"},
{"#   #   #########   #   #####   #########   #####   #####   #####   #   #"},
{"#               #       #   #           #           #   #   #       #   #"},
{"#########   #   #########   #########   #####   #   #   #   #########   #"},
{"#       #   #               #           #   #   #   #   #           #   #"},
{"#   #   #############   #   #   #########   #####   #   #########   #   #"},
{"#   #               #   #   #       #           #           #       #   #"},
{"#   #############   #####   #####   #   #####   #########   #   #####   #"},
{"#           #       #   #       #   #       #           #   #           #"},
{"#   #####   #####   #   #####   #   #########   #   #   #   #############"},
{"#       #       #   #   #       #       #       #   #   #       #       #"},
{"#############   #   #   #   #########   #   #####   #   #####   #####   #"},
{"#           #   #           #       #   #       #   #       #           #"},
{"#   #####   #   #########   #####   #   #####   #####   #############   #"},
{"#   #       #           #           #       #   #   #               #   #"},
{"#   #   #########   #   #####   #########   #   #   #############   #   #"},
{"#   #           #   #   #   #   #           #               #   #       #"},
{"#   #########   #   #   #   #####   #########   #########   #   #########"},
{"#   #       #   #   #           #           #   #       #               #"},
{"#   #   #####   #####   #####   #########   #####   #   #########   #   #"},
{"#   #                   #           #               #               #   #"},
{"# X #####################################################################"} };
void setup(){
    int i,j,flag=0;
    clrscr();
    while(flag==0){
	   y=rand()%23;
	   x=rand()%73;
	   if(maze[y][x]==' ') {  maze[y][x]='@';   flag=1;   }
    }
    for(i=0;i<23;i++){
	  for(j=0;j<73;j++){
	    printf("%c",maze[i][j]);
	  }
	  printf("\n");
    }
}
void game_loop(){
    char ch;
    int i,j,flag=0,posx=x,posy=y;
    while(maze[y][x]!='X'){
      flag=0;
	while(flag==0){
	      ch=getch();
	      posx=x;
	      posy=y;
	      if(ch=='a'){   posx--;}
	      else if(ch=='w'){   posy--;  }
	      else if(ch=='d'){   posx++;  }
	      else if(ch=='s'){   posy++;  }
	      else continue;
	      if(posx>=0 && posx<73 && posy>=0 && posy<23){
		      if(maze[posy][posx]==' '){
			 maze[y][x]=' ';  y=posy;   x=posx;
			 flag=1;   maze[y][x]='@';  }
		      else if(maze[posy][posx]=='X')  { flag=1;  maze[y][x]=' '; x=posx;  y=posy; }
		  }
		}
      clrscr();
      for(i=0;i<23;i++){
	    for(j=0;j<73;j++){
	       printf("%c",maze[i][j]);
	    }
	    printf("\n");
      }
    }
    clrscr();
    printf("\n\n\n\n\n\n\n\n\n\n\n\n\t\t\t\t  YOU WIN");
}
int main(){
   char c;
   clrscr();
   srand(time(0));
   setup();
   game_loop();
   getch();
   return 0;
}